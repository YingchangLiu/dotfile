#!/bin/zsh

if (( BUFFERLINES > 1 )); then
  private -i cursor=$CURSOR
  builtin zle .up-line
  (( cursor == CURSOR )) &&
      builtin zle .beginning-of-line
  (( cursor != CURSOR ))
else
  builtin zle history-search -w
fi
